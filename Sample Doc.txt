
import streamlit as st
import pandas as pd

# Simulating the topic_info DataFrame
# You should replace this with your actual DataFrame loading code
data = {
    'Topic': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
    'Count': [10, 20, 15, 5, 25, 30, 18, 7, 22, 14],
    'Name': ['Topic1', 'Topic2', 'Topic3', 'Topic4', 'Topic5', 'Topic6', 'Topic7', 'Topic8', 'Topic9', 'Topic10'],
    'Representation': ['Rep1', 'Rep2', 'Rep3', 'Rep4', 'Rep5', 'Rep6', 'Rep7', 'Rep8', 'Rep9', 'Rep10'],
    'OpenAI': ['OpenAI1', 'OpenAI2', 'OpenAI3', 'OpenAI4', 'OpenAI5', 'OpenAI6', 'OpenAI7', 'OpenAI8', 'OpenAI9', 'OpenAI10'],
    'mmr': [0.1, 0.2, 0.15, 0.05, 0.25, 0.3, 0.18, 0.07, 0.22, 0.14],
    'KeyBert': ['KeyBert1', 'KeyBert2', 'KeyBert3', 'KeyBert4', 'KeyBert5', 'KeyBert6', 'KeyBert7', 'KeyBert8', 'KeyBert9', 'KeyBert10'],
    'combined_text': ['Text1', 'Text2', 'Text3', 'Text4', 'Text5', 'Text6', 'Text7', 'Text8', 'Text9', 'Text10'],
    'label': ['Payroll', 'Tax', 'System', 'Benefits', 'Support', 'Banking', 'Training', 'Hiring', 'Miscellaneous', 'Payroll']
}

# Replace the below line with the actual loading of your topic_info DataFrame
topic_info = pd.DataFrame(data)

# Group by label and sum counts
label_counts = topic_info.groupby('label')['Count'].sum().reset_index()

# Display the total count of emails per label
st.title("Angry Email Analysis")
st.header("Email Counts by Label")

st.dataframe(label_counts)

# Function to display filtered data by label
def display_filtered_data(label):
    filtered_data = topic_info[topic_info['label'] == label][['Topic', 'Count', 'OpenAI', 'KeyBert']]
    st.write(filtered_data)

# Creating buttons for different labels
if st.button('Payroll'):
    st.write("Payroll related angry emails:")
    display_filtered_data('Payroll')

if st.button('Tax'):
    st.write("Tax related angry emails:")
    display_filtered_data('Tax')

if st.button('System'):
    st.write("System related angry emails:")
    display_filtered_data('System')

if st.button('Benefits'):
    st.write("Benefits related angry emails:")
    display_filtered_data('Benefits')

if st.button('Support'):
    st.write("Support related angry emails:")
    display_filtered_data('Support')

if st.button('Banking'):
    st.write("Banking related angry emails:")
    display_filtered_data('Banking')

if st.button('Training'):
    st.write("Training related angry emails:")
    display_filtered_data('Training')

if st.button('Hiring'):
    st.write("Hiring related angry emails:")
    display_filtered_data('Hiring')

if st.button('Miscellaneous'):
    st.write("Miscellaneous related angry emails:")
    display_filtered_data('Miscellaneous')

# To run the app, save the code to a file named `angry_email_analysis.py` and run the command `streamlit run angry_email_analysis.py` in your terminal.
